{"ast":null,"code":"import{NO_ELEMENT_FOUND}from\"../Constants\";export var eventStore=function eventStore(event,allEvents,setStore){if(event.text.length===0){return;}if(0===event.id){event.id=allEvents.last_event_id+1;allEvents.events.push(event);allEvents.last_event_id+=1;}else{var existingEventIndex=allEvents.events.findIndex(function(item){return item.id===event.id;});if(NO_ELEMENT_FOUND===existingEventIndex){event.id=0;eventStore(event,allEvents,setStore);return;}else{allEvents.events.splice(existingEventIndex,1,event);}}// else {\n//     // existingEventIndex.start = event.start\n//     // existingEventIndex.duration = event.duration\n// }\nsetStore(allEvents);};","map":{"version":3,"names":["NO_ELEMENT_FOUND","eventStore","event","allEvents","setStore","text","length","id","last_event_id","events","push","existingEventIndex","findIndex","item","splice"],"sources":["/Users/dhs/do-next/src/event/EventStore.ts"],"sourcesContent":["import { NO_ELEMENT_FOUND } from \"../Constants\";\nimport { Event, EventSet } from \"../DoData\";\n\nexport const eventStore = (\n    event: Event,\n    allEvents: EventSet,\n    setStore: (data: EventSet) => void\n) => {\n    if (event.text.length === 0) {\n        return\n    }\n\n    if (0 === event.id) {\n        event.id = allEvents.last_event_id + 1\n        allEvents.events.push(event)\n        allEvents.last_event_id += 1\n    }\n    else {\n        const existingEventIndex = allEvents.events\n            .findIndex(item => item.id === event.id)\n        if (NO_ELEMENT_FOUND === existingEventIndex) {\n            event.id = 0\n            eventStore(event, allEvents, setStore)\n            return\n        }\n        else {\n            allEvents.events.splice(existingEventIndex, 1, event)\n        }\n    }\n    \n    // else {\n    //     // existingEventIndex.start = event.start\n    //     // existingEventIndex.duration = event.duration\n    // }\n\n    setStore(allEvents)\n}\n"],"mappings":"AAAA,OAASA,gBAAT,KAAiC,cAAjC,CAGA,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,CACtBC,KADsB,CAEtBC,SAFsB,CAGtBC,QAHsB,CAIrB,CACD,GAAIF,KAAK,CAACG,IAAN,CAAWC,MAAX,GAAsB,CAA1B,CAA6B,CACzB,OACH,CAED,GAAI,IAAMJ,KAAK,CAACK,EAAhB,CAAoB,CAChBL,KAAK,CAACK,EAAN,CAAWJ,SAAS,CAACK,aAAV,CAA0B,CAArC,CACAL,SAAS,CAACM,MAAV,CAAiBC,IAAjB,CAAsBR,KAAtB,EACAC,SAAS,CAACK,aAAV,EAA2B,CAA3B,CACH,CAJD,IAKK,CACD,GAAMG,mBAAkB,CAAGR,SAAS,CAACM,MAAV,CACtBG,SADsB,CACZ,SAAAC,IAAI,QAAIA,KAAI,CAACN,EAAL,GAAYL,KAAK,CAACK,EAAtB,EADQ,CAA3B,CAEA,GAAIP,gBAAgB,GAAKW,kBAAzB,CAA6C,CACzCT,KAAK,CAACK,EAAN,CAAW,CAAX,CACAN,UAAU,CAACC,KAAD,CAAQC,SAAR,CAAmBC,QAAnB,CAAV,CACA,OACH,CAJD,IAKK,CACDD,SAAS,CAACM,MAAV,CAAiBK,MAAjB,CAAwBH,kBAAxB,CAA4C,CAA5C,CAA+CT,KAA/C,EACH,CACJ,CAED;AACA;AACA;AACA;AAEAE,QAAQ,CAACD,SAAD,CAAR,CACH,CAjCM"},"metadata":{},"sourceType":"module"}