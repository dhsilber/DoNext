{"ast":null,"code":"import{dayNowStartMilliseconds,weekStartMilliseconds}from\"../DateUtilities\";import ToDo from\"./ToDo\";import{jsx as _jsx}from\"react/jsx-runtime\";var persistCheck=function persistCheck(item){if(item.days.length==0){return true;}var today=new Date().getDay();// console.log(\"today: \", today)\nvar previousDay=-1;var latestDay=-1;item.days.forEach(function(day){if(day>latestDay)latestDay=day;if(day>previousDay&&day<=today)previousDay=day;// console.log(\"day: \", day, \" latest: \", latestDay, \" previous: \", previousDay)\n});var dayPersistedFrom=previousDay==-1?latestDay:previousDay;// console.log(\"dayPersistedFrom: \", dayPersistedFrom)\nvar lastWeek=weekStartMilliseconds();// console.log(\"week: \", lastWeek)\nreturn lastWeek[dayPersistedFrom]>item.done;};var RepeatingDos=function RepeatingDos(_ref){var data=_ref.data;var dayStart=dayNowStartMilliseconds();var today=new Date().getDay();return/*#__PURE__*/_jsx(\"ul\",{className:\"todo\",children:data.filter(function(todo){return todo.done<dayStart;}).filter(function(todo){return persistCheck(todo);}).map(function(todo){return/*#__PURE__*/_jsx(ToDo,{todo:todo},todo.text);})});};export default RepeatingDos;","map":{"version":3,"names":["dayNowStartMilliseconds","weekStartMilliseconds","ToDo","persistCheck","item","days","length","today","Date","getDay","previousDay","latestDay","forEach","day","dayPersistedFrom","lastWeek","done","RepeatingDos","data","dayStart","filter","todo","map","text"],"sources":["/Users/dhs/do-next/src/todo/RepeatingDos.tsx"],"sourcesContent":["import { lookup } from \"dns\"\nimport { isJSDocThisTag, textChangeRangeNewSpan } from \"typescript\"\nimport { dayNowStartMilliseconds, weekStartMilliseconds } from \"../DateUtilities\"\nimport { Todo } from \"../DoData\"\nimport ToDo from \"./ToDo\"\n\ninterface RepeatingDosProps {\n    data: Todo[]\n}\n\nconst persistCheck = (item: Todo): boolean => {\n    if( item.days.length == 0){\n        return true\n    }\n\n    const today = new Date().getDay()\n    // console.log(\"today: \", today)\n\n    let previousDay = -1\n    let latestDay = -1\n    item.days.forEach(day => {\n        if (day > latestDay) latestDay = day\n        if (day > previousDay && day <= today) previousDay = day\n        // console.log(\"day: \", day, \" latest: \", latestDay, \" previous: \", previousDay)\n    })\n\n    let dayPersistedFrom = (previousDay == -1) ? latestDay : previousDay\n    // console.log(\"dayPersistedFrom: \", dayPersistedFrom)\n\n    const lastWeek = weekStartMilliseconds()\n    // console.log(\"week: \", lastWeek)\n\n    return lastWeek[dayPersistedFrom] > item.done\n}\n\nconst RepeatingDos = ({ data }: RepeatingDosProps) => {\n    const dayStart = dayNowStartMilliseconds()\n    const today = new Date().getDay()\n\n    return <ul className=\"todo\">\n        {\n            data\n                .filter(todo => todo.done < dayStart)\n                .filter(todo => persistCheck(todo))\n                .map((todo) => <ToDo key={todo.text} todo={todo} />)\n        }\n    </ul>\n\n}\n\nexport default RepeatingDos\n"],"mappings":"AAEA,OAASA,uBAAT,CAAkCC,qBAAlC,KAA+D,kBAA/D,CAEA,MAAOC,KAAP,KAAiB,QAAjB,C,2CAMA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,IAAD,CAAyB,CAC1C,GAAIA,IAAI,CAACC,IAAL,CAAUC,MAAV,EAAoB,CAAxB,CAA0B,CACtB,MAAO,KAAP,CACH,CAED,GAAMC,MAAK,CAAG,GAAIC,KAAJ,GAAWC,MAAX,EAAd,CACA;AAEA,GAAIC,YAAW,CAAG,CAAC,CAAnB,CACA,GAAIC,UAAS,CAAG,CAAC,CAAjB,CACAP,IAAI,CAACC,IAAL,CAAUO,OAAV,CAAkB,SAAAC,GAAG,CAAI,CACrB,GAAIA,GAAG,CAAGF,SAAV,CAAqBA,SAAS,CAAGE,GAAZ,CACrB,GAAIA,GAAG,CAAGH,WAAN,EAAqBG,GAAG,EAAIN,KAAhC,CAAuCG,WAAW,CAAGG,GAAd,CACvC;AACH,CAJD,EAMA,GAAIC,iBAAgB,CAAIJ,WAAW,EAAI,CAAC,CAAjB,CAAsBC,SAAtB,CAAkCD,WAAzD,CACA;AAEA,GAAMK,SAAQ,CAAGd,qBAAqB,EAAtC,CACA;AAEA,MAAOc,SAAQ,CAACD,gBAAD,CAAR,CAA6BV,IAAI,CAACY,IAAzC,CACH,CAvBD,CAyBA,GAAMC,aAAY,CAAG,QAAfA,aAAe,MAAiC,IAA9BC,KAA8B,MAA9BA,IAA8B,CAClD,GAAMC,SAAQ,CAAGnB,uBAAuB,EAAxC,CACA,GAAMO,MAAK,CAAG,GAAIC,KAAJ,GAAWC,MAAX,EAAd,CAEA,mBAAO,WAAI,SAAS,CAAC,MAAd,UAECS,IAAI,CACCE,MADL,CACY,SAAAC,IAAI,QAAIA,KAAI,CAACL,IAAL,CAAYG,QAAhB,EADhB,EAEKC,MAFL,CAEY,SAAAC,IAAI,QAAIlB,aAAY,CAACkB,IAAD,CAAhB,EAFhB,EAGKC,GAHL,CAGS,SAACD,IAAD,qBAAU,KAAC,IAAD,EAAsB,IAAI,CAAEA,IAA5B,EAAWA,IAAI,CAACE,IAAhB,CAAV,EAHT,CAFD,EAAP,CASH,CAbD,CAeA,cAAeN,aAAf"},"metadata":{},"sourceType":"module"}