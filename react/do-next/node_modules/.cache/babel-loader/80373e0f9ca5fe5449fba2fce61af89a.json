{"ast":null,"code":"import { NO_ELEMENT_FOUND } from \"../Constants\";\nexport const eventStore = (event, allEvents, setStore) => {\n  if (event.text.length === 0) {\n    return;\n  }\n\n  if (0 === event.id) {\n    event.id = allEvents.last_event_id + 1;\n    allEvents.events.push(event);\n    allEvents.last_event_id += 1;\n  } else {\n    const existingEventIndex = allEvents.events.findIndex(item => item.id === event.id);\n\n    if (NO_ELEMENT_FOUND === existingEventIndex) {\n      event.id = 0;\n      eventStore(event, allEvents, setStore);\n      return;\n    } else {\n      allEvents.events.splice(existingEventIndex, 1, event);\n    }\n  } // else {\n  //     // existingEventIndex.start = event.start\n  //     // existingEventIndex.duration = event.duration\n  // }\n\n\n  setStore(allEvents);\n};","map":{"version":3,"names":["NO_ELEMENT_FOUND","eventStore","event","allEvents","setStore","text","length","id","last_event_id","events","push","existingEventIndex","findIndex","item","splice"],"sources":["/Users/dhs/do-next/src/event/EventStore.ts"],"sourcesContent":["import { NO_ELEMENT_FOUND } from \"../Constants\";\nimport { Event, EventSet } from \"../DoData\";\n\nexport const eventStore = (\n    event: Event,\n    allEvents: EventSet,\n    setStore: (data: EventSet) => void\n) => {\n    if (event.text.length === 0) {\n        return\n    }\n\n    if (0 === event.id) {\n        event.id = allEvents.last_event_id + 1\n        allEvents.events.push(event)\n        allEvents.last_event_id += 1\n    }\n    else {\n        const existingEventIndex = allEvents.events\n            .findIndex(item => item.id === event.id)\n        if (NO_ELEMENT_FOUND === existingEventIndex) {\n            event.id = 0\n            eventStore(event, allEvents, setStore)\n            return\n        }\n        else {\n            allEvents.events.splice(existingEventIndex, 1, event)\n        }\n    }\n    \n    // else {\n    //     // existingEventIndex.start = event.start\n    //     // existingEventIndex.duration = event.duration\n    // }\n\n    setStore(allEvents)\n}\n"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,cAAjC;AAGA,OAAO,MAAMC,UAAU,GAAG,CACtBC,KADsB,EAEtBC,SAFsB,EAGtBC,QAHsB,KAIrB;EACD,IAAIF,KAAK,CAACG,IAAN,CAAWC,MAAX,KAAsB,CAA1B,EAA6B;IACzB;EACH;;EAED,IAAI,MAAMJ,KAAK,CAACK,EAAhB,EAAoB;IAChBL,KAAK,CAACK,EAAN,GAAWJ,SAAS,CAACK,aAAV,GAA0B,CAArC;IACAL,SAAS,CAACM,MAAV,CAAiBC,IAAjB,CAAsBR,KAAtB;IACAC,SAAS,CAACK,aAAV,IAA2B,CAA3B;EACH,CAJD,MAKK;IACD,MAAMG,kBAAkB,GAAGR,SAAS,CAACM,MAAV,CACtBG,SADsB,CACZC,IAAI,IAAIA,IAAI,CAACN,EAAL,KAAYL,KAAK,CAACK,EADd,CAA3B;;IAEA,IAAIP,gBAAgB,KAAKW,kBAAzB,EAA6C;MACzCT,KAAK,CAACK,EAAN,GAAW,CAAX;MACAN,UAAU,CAACC,KAAD,EAAQC,SAAR,EAAmBC,QAAnB,CAAV;MACA;IACH,CAJD,MAKK;MACDD,SAAS,CAACM,MAAV,CAAiBK,MAAjB,CAAwBH,kBAAxB,EAA4C,CAA5C,EAA+CT,KAA/C;IACH;EACJ,CArBA,CAuBD;EACA;EACA;EACA;;;EAEAE,QAAQ,CAACD,SAAD,CAAR;AACH,CAjCM"},"metadata":{},"sourceType":"module"}