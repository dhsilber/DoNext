{"ast":null,"code":"import { NO_ELEMENT_FOUND } from '../Constants';\nexport const taskStore = (task, allTasks, setStore) => {\n  if (task.text.length === 0) {\n    return;\n  }\n\n  if (task.id === 0) {\n    task.id = allTasks.last_id + 1;\n    allTasks.tasks.push(task);\n    allTasks.last_id += 1;\n  } else {\n    const existingTaskIndex = allTasks.tasks.findIndex(item => item.id === task.id);\n\n    if (existingTaskIndex === NO_ELEMENT_FOUND) {\n      task.id = 0;\n      taskStore(task, allTasks, setStore);\n      return;\n    } else {\n      allTasks.tasks.splice(existingTaskIndex, 1, task);\n    }\n  }\n\n  setStore(allTasks);\n};","map":{"version":3,"names":["NO_ELEMENT_FOUND","taskStore","task","allTasks","setStore","text","length","id","last_id","tasks","push","existingTaskIndex","findIndex","item","splice"],"sources":["/Users/dhs/do-next/src/task/TaskStore.ts"],"sourcesContent":["import { NO_ELEMENT_FOUND } from '../Constants';\nimport { Task, TaskSet } from '../DoData';\n\nexport const taskStore = (\n    task: Task,\n    allTasks: TaskSet,\n    setStore: (data: TaskSet) => void\n) => {\n    if (task.text.length === 0) {\n        return\n    }\n\n    if (task.id === 0) {\n        task.id = allTasks.last_id + 1\n        allTasks.tasks.push(task)\n        allTasks.last_id += 1\n    }\n    else {\n        const existingTaskIndex = allTasks.tasks\n            .findIndex(item => item.id === task.id)\n        if (existingTaskIndex === NO_ELEMENT_FOUND) {\n            task.id = 0\n            taskStore(task, allTasks, setStore)\n            return\n        }\n        else {\n            allTasks.tasks.splice(existingTaskIndex, 1, task)\n        }\n    }\n\n    setStore(allTasks)\n}\n"],"mappings":"AAAA,SAASA,gBAAT,QAAiC,cAAjC;AAGA,OAAO,MAAMC,SAAS,GAAG,CACrBC,IADqB,EAErBC,QAFqB,EAGrBC,QAHqB,KAIpB;EACD,IAAIF,IAAI,CAACG,IAAL,CAAUC,MAAV,KAAqB,CAAzB,EAA4B;IACxB;EACH;;EAED,IAAIJ,IAAI,CAACK,EAAL,KAAY,CAAhB,EAAmB;IACfL,IAAI,CAACK,EAAL,GAAUJ,QAAQ,CAACK,OAAT,GAAmB,CAA7B;IACAL,QAAQ,CAACM,KAAT,CAAeC,IAAf,CAAoBR,IAApB;IACAC,QAAQ,CAACK,OAAT,IAAoB,CAApB;EACH,CAJD,MAKK;IACD,MAAMG,iBAAiB,GAAGR,QAAQ,CAACM,KAAT,CACrBG,SADqB,CACXC,IAAI,IAAIA,IAAI,CAACN,EAAL,KAAYL,IAAI,CAACK,EADd,CAA1B;;IAEA,IAAII,iBAAiB,KAAKX,gBAA1B,EAA4C;MACxCE,IAAI,CAACK,EAAL,GAAU,CAAV;MACAN,SAAS,CAACC,IAAD,EAAOC,QAAP,EAAiBC,QAAjB,CAAT;MACA;IACH,CAJD,MAKK;MACDD,QAAQ,CAACM,KAAT,CAAeK,MAAf,CAAsBH,iBAAtB,EAAyC,CAAzC,EAA4CT,IAA5C;IACH;EACJ;;EAEDE,QAAQ,CAACD,QAAD,CAAR;AACH,CA5BM"},"metadata":{},"sourceType":"module"}